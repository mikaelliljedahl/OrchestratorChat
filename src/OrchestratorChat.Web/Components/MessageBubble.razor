@namespace OrchestratorChat.Web.Components
@inherits ComponentBase
@using OrchestratorChat.Core.Messages

<div class="message-bubble @GetMessageClass()">
    <div class="message-header">
        <MudText Typo="Typo.caption">
            @GetSenderName() â€¢ @Message.Timestamp.ToString("HH:mm")
        </MudText>
    </div>
    <div class="message-content">
        @if (Message.Role == MessageRole.Assistant)
        {
            <MarkdownRenderer Content="@Message.Content" />
        }
        else
        {
            <MudText>@Message.Content</MudText>
        }
    </div>
    @if (Message.Attachments?.Any() == true)
    {
        <div class="message-attachments">
            @foreach (var attachment in Message.Attachments)
            {
                <AttachmentChip Attachment="@attachment" />
            }
        </div>
    }
    
    @if (Message.TokenUsage != null)
    {
        <div class="message-footer">
            <MudText Typo="Typo.caption" Class="text-muted">
                Tokens: @Message.TokenUsage.InputTokens in, @Message.TokenUsage.OutputTokens out
            </MudText>
        </div>
    }
</div>