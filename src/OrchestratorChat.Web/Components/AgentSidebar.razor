@namespace OrchestratorChat.Web.Components
@inherits ComponentBase

<MudPaper Class="pa-3" Style="height: 100%;">
    <div class="d-flex justify-space-between align-center mb-3">
        <MudText Typo="Typo.h6">Agents</MudText>
        <MudIconButton Icon="@Icons.Material.Filled.Add" 
                      Size="Size.Small" 
                      Color="Color.Primary" 
                      OnClick="@ShowCreateAgentDialog" 
                      title="Create New Agent" />
    </div>
    
    <MudList T="object">
        @foreach (var agent in Agents)
        {
            <MudListItem T="object" @onclick="@(() => SelectAgent(agent))"
                         Class="@(SelectedAgent?.Id == agent.Id ? "selected-agent" : "")"
                         Style="cursor: pointer;">
                <div class="d-flex align-center justify-space-between">
                    <div class="d-flex align-center">
                        <MudAvatar Size="Size.Small" 
                                  Color="@GetAgentStatusColor(agent)" 
                                  Class="mr-3">
                            @agent.Name.Substring(0, 1).ToUpper()
                        </MudAvatar>
                        <div>
                            <div class="d-flex align-center">
                                <MudText Typo="Typo.body1">@agent.Name</MudText>
                                @if (IsDefaultAgent(agent))
                                {
                                    <MudIcon Icon="@Icons.Material.Filled.CheckCircle" 
                                            Size="Size.Small" 
                                            Color="Color.Success" 
                                            Class="ml-2" 
                                            Title="Default Agent" />
                                }
                            </div>
                            <MudText Typo="Typo.caption" Class="text-muted">@agent.Status</MudText>
                        </div>
                    </div>
                    @if (!IsDefaultAgent(agent))
                    {
                        <MudIconButton Icon="@Icons.Material.Filled.Star" 
                                      Size="Size.Small" 
                                      Color="Color.Default" 
                                      OnClick="@((e) => SetAsDefault(agent, e))"
                                      Title="Set as Default"
                                      Class="ml-2" />
                    }
                </div>
            </MudListItem>
        }
    </MudList>
    
    @if (!Agents.Any())
    {
        <div class="text-center mt-4">
            <MudIcon Icon="@Icons.Material.Filled.SmartToy" Size="Size.Large" Class="text-muted mb-2" />
            <MudText Typo="Typo.body2" Class="text-muted">No agents available</MudText>
        </div>
    }
</MudPaper>